# PyScript configuration for package tests
# for a fully offline build we would need the pyodide.js locally
# interpreter = "https://cdn.jsdelivr.net/pyodide/v0.29.1/full/pyodide.js"

packages = [
    # Local wheel
    "./static/blake3-1.0.8-cp313-cp313-pyodide_2025_0_wasm32.whl",
    "pyoqs-wasm",
    "pychloride",
    # Built-in Pyodide packages
    "micropip",
    "jsonschema",
    "setuptools",
    "msgpack",
    "multidict",
    "pyyaml",
    "cryptography",
    # Pure Python packages (via micropip)
    "multicommand",
    "hjson",
    "wheel",
    "apispec",
    "mnemonic",
    "prettytable",
    "http-sfv",
    "semver",
    "qrcode",
    "ordered-set",
    "cbor2",
    "pyasn1",
    "pyasn1-alt-modules",
]

# Fetch files that need to be imported at runtime
[files]
# Pysodium tests
"./python/pysodium_unittest.py" = "./pysodium_unittest.py"

# Liboqs tests
"./python/test_kem.py" = "./test_kem.py"
"./python/test_sig.py" = "./test_sig.py"
"./python/test_stfl_sig.py" = "./test_stfl_sig.py"
"./python/test_runner_doer.py" = "./test_runner_doer.py"
"./python/test_loaders.py" = "./test_loaders.py"

# Hio package
"./python/hio/__init__.py" = "./hio/__init__.py"
"./python/hio/hioing.py" = "./hio/hioing.py"
"./python/hio/base/__init__.py" = "./hio/base/__init__.py"
"./python/hio/base/basing.py" = "./hio/base/basing.py"
"./python/hio/base/doing.py" = "./hio/base/doing.py"
"./python/hio/base/tyming.py" = "./hio/base/tyming.py"
"./python/hio/help/__init__.py" = "./hio/help/__init__.py"
"./python/hio/help/timing.py" = "./hio/help/timing.py"
"./python/hio/help/helping.py" = "./hio/help/helping.py"
"./python/hio/help/hicting.py" = "./hio/help/hicting.py"

# Hio HTTP parser subset for JS-bridge prototype
"./python/hio/core/__init__.py" = "./hio/core/__init__.py"
"./python/hio/core/http/__init__.py" = "./hio/core/http/__init__.py"
"./python/hio/core/http/httping.py" = "./hio/core/http/httping.py"

# Hio HTTP client JS-bridge prototype
"./python/hio_http_client_bridge.py" = "./hio_http_client_bridge.py"
"./python/run_hio_client_bridge.py" = "./run_hio_client_bridge.py"

# Hio bridge for browser
"./python/hio_bridge.py" = "./hio_bridge.py"

# Blake3 tests
"./python/test_blake3.py" = "./test_blake3.py"
"./python/test_vectors.json" = "./test_vectors.json"

# IndexedDB probe
"./python/indexeddb_probe.py" = "./indexeddb_probe.py"

# IndexedDB tests
"./python/indexeddb_python.py" = "./indexeddb_python.py"
"./python/test_indexeddb.py" = "./test_indexeddb.py"
