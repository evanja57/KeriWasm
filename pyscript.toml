# PyScript configuration for package tests
# for a fully offline build we would need the pyodide.js locally
# interpreter = "https://cdn.jsdelivr.net/pyodide/v0.29.1/full/pyodide.js"

packages = [
    # Local wheel
    "./static/blake3-1.0.8-cp313-cp313-pyodide_2025_0_wasm32.whl",
    "pyoqs-wasm",
    "pychloride",
    # Built-in Pyodide packages
    "micropip",
    "jsonschema",
    "setuptools",
    "msgpack",
    "multidict",
    "pyyaml",
    "cryptography",
    # Pure Python packages (via micropip)
    "multicommand",
    "hjson",
    "wheel",
    "apispec",
    "mnemonic",
    "prettytable",
    "http-sfv",
    "semver",
    "qrcode",
    "ordered-set",
    "cbor2",
    "pyasn1",
    "pyasn1-alt-modules",
]

# Fetch files that need to be imported at runtime
[files]
# Runner package
"./python/runners/__init__.py" = "./runners/__init__.py"
"./python/runners/package_tests.py" = "./runners/package_tests.py"
"./python/runners/run_pysodium_suite.py" = "./runners/run_pysodium_suite.py"
"./python/runners/run_blake3_suite.py" = "./runners/run_blake3_suite.py"
"./python/runners/run_hio_client_bridge.py" = "./runners/run_hio_client_bridge.py"
"./python/runners/run_indexeddb_suite.py" = "./runners/run_indexeddb_suite.py"
"./python/runners/indexeddb_probe.py" = "./runners/indexeddb_probe.py"
"./python/runners/run_liboqs_suite.py" = "./runners/run_liboqs_suite.py"
"./python/runners/run_liboqs_worker.py" = "./runners/run_liboqs_worker.py"
"./python/runners/test_harness_app.py" = "./runners/test_harness_app.py"

# Core modules
"./python/core/__init__.py" = "./core/__init__.py"
"./python/core/hio_bridge.py" = "./core/hio_bridge.py"
"./python/core/hio_http_client_bridge.py" = "./core/hio_http_client_bridge.py"
"./python/core/indexeddb_python.py" = "./core/indexeddb_python.py"
"./python/core/test_runner_doer.py" = "./core/test_runner_doer.py"
"./python/core/test_loaders.py" = "./core/test_loaders.py"
"./python/core/ui_log.py" = "./core/ui_log.py"

# Test packages
"./python/tests/__init__.py" = "./tests/__init__.py"

# Liboqs tests
"./python/tests/liboqs/__init__.py" = "./tests/liboqs/__init__.py"
"./python/tests/liboqs/test_kem.py" = "./tests/liboqs/test_kem.py"
"./python/tests/liboqs/test_sig.py" = "./tests/liboqs/test_sig.py"
"./python/tests/liboqs/test_stfl_sig.py" = "./tests/liboqs/test_stfl_sig.py"

# Blake3 tests
"./python/tests/blake3/__init__.py" = "./tests/blake3/__init__.py"
"./python/tests/blake3/test_blake3.py" = "./tests/blake3/test_blake3.py"
"./python/tests/blake3/test_vectors.json" = "./tests/blake3/test_vectors.json"

# IndexedDB tests
"./python/tests/indexeddb/__init__.py" = "./tests/indexeddb/__init__.py"
"./python/tests/indexeddb/test_indexeddb.py" = "./tests/indexeddb/test_indexeddb.py"

# Pysodium tests
"./python/tests/pysodium/__init__.py" = "./tests/pysodium/__init__.py"
"./python/tests/pysodium/pysodium_unittest.py" = "./tests/pysodium/pysodium_unittest.py"

# Hio package
"./python/hio/__init__.py" = "./hio/__init__.py"
"./python/hio/hioing.py" = "./hio/hioing.py"
"./python/hio/base/__init__.py" = "./hio/base/__init__.py"
"./python/hio/base/basing.py" = "./hio/base/basing.py"
"./python/hio/base/doing.py" = "./hio/base/doing.py"
"./python/hio/base/tyming.py" = "./hio/base/tyming.py"
"./python/hio/help/__init__.py" = "./hio/help/__init__.py"
"./python/hio/help/timing.py" = "./hio/help/timing.py"
"./python/hio/help/helping.py" = "./hio/help/helping.py"
"./python/hio/help/hicting.py" = "./hio/help/hicting.py"

# Hio HTTP parser subset for JS-bridge prototype
"./python/hio/core/__init__.py" = "./hio/core/__init__.py"
"./python/hio/core/http/__init__.py" = "./hio/core/http/__init__.py"
"./python/hio/core/http/httping.py" = "./hio/core/http/httping.py"
